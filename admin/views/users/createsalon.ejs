<!DOCTYPE html>
<html :class="{ 'theme-dark': dark }" x-data="data()" lang="en">

<head>
  <%- include('../include/_head') %>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js" defer></script>
  <script src="/js/charts-pie.js" defer></script>
  <script src="/js/charts-bars.js" defer></script>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCRNjykxoRKwqenOpoqBdoYz1CTvPYI5So&libraries=places"></script>

</head>

<body>
  <div class="flex h-screen bg-gray-50 dark:bg-gray-900" :class="{ 'overflow-hidden': isSideMenuOpen }">
    <!-- Desktop sidebar -->

    <%- include('../include/_sidebar') %>
    
    <div class="flex flex-col flex-1 w-full">

      <%- include('../include/_header') %>
      
      <!-- content  -->
      <main class="h-full overflow-y-auto">
        <div class="container px-6 mx-auto grid">
            <div class="flex justify-between">
                <h2 class="my-6 text-2xl font-semibold text-gray-700 dark:text-gray-200">
                    <%= title %> 
                </h2>
            </div>
    
            <!-- Table -->
            <div class="container w-full mb-8 rounded-lg bg-white shadow-xs px-6">
                <div class="w-full">
                    <div class="mt-4 mb-6">
                        <form action="/admin/savesalon" method="POST" enctype="multipart/form-data">
                            <input class="block w-full mt-1 text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:text-gray-300 dark:focus:shadow-outline-gray form-input" type="hidden" name="id" value="<%= userData.id || '' %>" />
                            
                            <label class="block text-sm">
                                <span class="text-gray-700 dark:text-gray-400">Username</span>
                                <input class="block w-full mt-1 text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:text-gray-300 dark:focus:shadow-outline-gray form-input"  type="text" name="user_name" value="<%= userData.user_name || '' %>" class="form-input" placeholder="Username" required />
                            </label>
    
                            <label class="block text-sm mt-4">
                                <span class="text-gray-700 dark:text-gray-400">First Name</span>
                                <input class="block w-full mt-1 text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:text-gray-300 dark:focus:shadow-outline-gray form-input" type="text" name="first_name" value="<%= userData.first_name || '' %>" class="form-input" placeholder="First Name" required />
                            </label>
    
                            <label class="block text-sm mt-4">
                                <span class="text-gray-700 dark:text-gray-400">Last Name</span>
                                <input class="block w-full mt-1 text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:text-gray-300 dark:focus:shadow-outline-gray form-input" type="text" name="last_name" value="<%= userData.last_name || '' %>" class="form-input" placeholder="Last Name" required />
                            </label>
    
                            <label class="block text-sm mt-4">
                                <span class="text-gray-700 dark:text-gray-400">Email</span>
                                <input class="block w-full mt-1 text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:text-gray-300 dark:focus:shadow-outline-gray form-input" type="email" name="email" value="<%= userData.email || '' %>" class="form-input" placeholder="Email" required />
                            </label>
    
                            <label class="block text-sm mt-4">
                                <span class="text-gray-700 dark:text-gray-400">Password</span>
                                <input <%= userData.id ? 'disabled' : '' %> class="block w-full mt-1 text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:text-gray-300 dark:focus:shadow-outline-gray form-input" type="password" name="password" class="form-input" placeholder="Password" value="<%= userData.password || '' %>" required/>
                            </label>
    
                            <label class="block text-sm mt-4">
                                <span class="text-gray-700 dark:text-gray-400">Salon Name</span>
                                <input class="block w-full mt-1 text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:text-gray-300 dark:focus:shadow-outline-gray form-input" type="text" name="salon_name" value="<%= userData.salon_name || '' %>" class="form-input" placeholder="Salon Name" />
                            </label>
    
                            <label class="block text-sm mt-4">
                                <span class="text-gray-700 dark:text-gray-400">Category</span>
                                <select name="category" class="block w-full mt-1 text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:text-gray-300 dark:focus:shadow-outline-gray form-select">
                                    <option value="">Select Category</option>
                                    <option value="Hair Salon" <%= userData.category === 'Hair Salon' ? 'selected' : '' %>>Hair Salon</option>
                                    <option value="Esthetics" <%= userData.category === 'Esthetics' ? 'selected' : '' %>>Esthetics</option>
                                    <option value="Medico Esthetic" <%= userData.category === 'Medico Esthetic' ? 'selected' : '' %>>Medico Esthetic</option>
                                    <option value="Nails Spa" <%= userData.category === 'Nails Spa' ? 'selected' : '' %>>Nails Spa</option>
                                    <option value="Tatoo" <%= userData.category === 'Tatoo' ? 'selected' : '' %>>Tatoo</option>
                                    <option value="Barbershop" <%= userData.category === 'Barbershop' ? 'selected' : '' %>>Barbershop</option>
                                    <option value="Spa Facility" <%= userData.category === 'Spa Facility' ? 'selected' : '' %>>Spa Facility</option>
                                    <option value="Messages" <%= userData.category === 'Messages' ? 'selected' : '' %>>Messages</option>
                                    <option value="Plastic Surgery" <%= userData.category === 'Plastic Surgery' ? 'selected' : '' %>>Plastic Surgery</option>
                                    <option value="Lashes and Brows" <%= userData.category === 'Lashes and Brows' ? 'selected' : '' %>>Lashes and Brows</option>
                                    <option value="Others" <%= userData.category === 'Others' ? 'selected' : '' %>>Others</option>
                                </select>
                            </label>
                            
                            <style>
                                .switch {
                                  position: relative;
                                  display: inline-block;
                                  width: 60px;
                                  height: 34px;
                                }
                                
                                .switch input { 
                                  opacity: 0;
                                  width: 0;
                                  height: 0;
                                }
                                
                                .slider {
                                  position: absolute;
                                  cursor: pointer;
                                  top: 0;
                                  left: 0;
                                  right: 0;
                                  bottom: 0;
                                  background-color: #ccc;
                                  -webkit-transition: .4s;
                                  transition: .4s;
                                }
                                
                                .slider:before {
                                  position: absolute;
                                  content: "";
                                  height: 26px;
                                  width: 26px;
                                  left: 4px;
                                  bottom: 4px;
                                  background-color: white;
                                  -webkit-transition: .4s;
                                  transition: .4s;
                                }
                                
                                input:checked + .slider {
                                  background-color: #2196F3;
                                }
                                
                                input:focus + .slider {
                                  box-shadow: 0 0 1px #2196F3;
                                }
                                
                                input:checked + .slider:before {
                                  -webkit-transform: translateX(26px);
                                  -ms-transform: translateX(26px);
                                  transform: translateX(26px);
                                }
                                
                                /* Rounded sliders */
                                .slider.round {
                                  border-radius: 34px;
                                }
                                
                                .slider.round:before {
                                  border-radius: 50%;
                                }
                                </style>
                                    <% const days = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"]; %>
                                    <% for (let i = 0; i < days.length; i++) { 
                                        const day = days[i];
                                        const dayNum = i + 1;
                                        const isOpenName = `day${dayNum}_is_open`;
                                        const openTimeName = `day${dayNum}_open_time`;
                                        const endTimeName = `day${dayNum}_end_time`;
                                    
                                        const openDay = (openDays || []).find(d => d.day === day) || {};
                                        const isChecked = openDay.open === 'On' ? 'checked' : '';
                                        const startTime = openDay.start_time || new Date().toTimeString().slice(0, 5);
                                        const endTime = openDay.end_time || new Date().toTimeString().slice(0, 5);
                                    %>
                                    <div class="flex items-center space-x-4 mt-4 text-sm">
                                        <!-- Day Label -->
                                        <span class="w-20 text-gray-700 dark:text-gray-400"><%= day %></span>
                                    
                                        <!-- Toggle Switch -->
                                        <label class="switch">
                                            <input type="checkbox" name="<%= isOpenName %>" <%= isChecked %>>
                                            <span class="slider round"></span>
                                        </label>
                                    
                                        <!-- Open Time Label -->
                                        <span class="text-gray-700 dark:text-gray-400">Open Time</span>
                                    
                                        <!-- Time Input -->
                                        <input 
                                            class="w-32 text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:text-gray-300 dark:focus:shadow-outline-gray form-input" 
                                            type="time" 
                                            name="<%= openTimeName %>" 
                                            value="<%= startTime %>" 
                                        />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;To
                                        <!-- Time Input -->
                                        <input 
                                            class="w-32 text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:text-gray-300 dark:focus:shadow-outline-gray form-input" 
                                            type="time" 
                                            name="<%= endTimeName %>" 
                                            value="<%= endTime %>" 
                                        />
                                    </div>
                                    <% } %>                                    
                           
                         
                            
    
                            <label class="block text-sm mt-4">
                                <span class="text-gray-700 dark:text-gray-400">Contact Number</span>
                                <input class="block w-full mt-1 text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:text-gray-300 dark:focus:shadow-outline-gray form-input" type="text" name="contact_no" value="<%= userData.contact_no || '' %>" class="form-input" placeholder="Contact Number" />
                            </label>
    
                            <label class="block text-sm mt-4">
                                <span class="text-gray-700 dark:text-gray-400">Website</span>
                                <input class="block w-full mt-1 text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:text-gray-300 dark:focus:shadow-outline-gray form-input" type="text" name="site_name" value="<%= userData.site_name || '' %>" class="form-input" placeholder="Website URL" />
                            </label>
    
                            <label class="block text-sm mt-4">
                                <span class="text-gray-700 dark:text-gray-400">Address</span>
                                <input id="autocomplete" class="block w-full mt-1 text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:text-gray-300 dark:focus:shadow-outline-gray form-input" type="text" name="address" value="<%= userData.address || '' %>" class="form-input" placeholder="Address" />
                            </label>
                            <input type="hidden" name="latitude" id="latitude" value="<%= userData.latitude || '' %>">
                            <input type="hidden" name="longitude" id="longitude" value="<%= userData.longitude || '' %>">
                            <label class="block text-sm mt-4">
                                <span class="text-gray-700 dark:text-gray-400">Short Bio</span>
                                <textarea name="bio"
                                class="block w-full mt-1 text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:text-gray-300 dark:focus:shadow-outline-gray form-input"
                                placeholder="Short Bio"><%= userData.bio || '' %></textarea>
                            </label>
    
                            <label class="block text-sm mt-4">
                                <span class="text-gray-700 dark:text-gray-400">Profile Image</span>
                                <input class="block w-full mt-1 text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:text-gray-300 dark:focus:shadow-outline-gray form-input" type="file" name="profile_image" class="form-input" />
                            </label>
                        </div>
                    </div>

                    <footer
                class="flex flex-col items-center justify-end px-6 py-3 -mx-6 space-y-4 sm:space-y-0 sm:space-x-6 sm:flex-row">
                <button onclick="window.location.href='appuser'"
                    class="w-full px-5 py-3 text-sm font-medium leading-5 text-white text-gray-700 transition-colors duration-150 border border-gray-300 rounded-lg dark:text-gray-400 sm:px-4 sm:py-2 sm:w-auto active:bg-transparent hover:border-gray-500 focus:border-gray-500 active:text-gray-500 focus:outline-none focus:shadow-outline-gray">
                    Cancel
                </button>
                <button  type="submit"
                    class="w-full px-5 py-3 text-sm font-medium text-white transition-colors duration-150 bg-purple-600 border border-transparent rounded-lg sm:w-auto sm:px-4 sm:py-2 active:bg-purple-600 hover:bg-purple-700 focus:outline-none focus:shadow-outline-purple">
                    Save
                </button>
            </footer>

                            
                        </form>
            </div>
        </div>
    </main>
    
      <!-- end content -->
    </div>
  </div>

  <%- include('../include/_footer') %>

  <script>
    let autocomplete;
  
    function initAutocomplete() {
      const input = document.getElementById("autocomplete");
      autocomplete = new google.maps.places.Autocomplete(input, {
        types: ["geocode"],
        componentRestrictions: { country: "us" }
      });
  
      autocomplete.addListener("place_changed", fillInAddress);
    }
  
    function fillInAddress() {
      const place = autocomplete.getPlace();
  
      // Coordinates
      const lat = place.geometry?.location.lat();
      const lng = place.geometry?.location.lng();
      document.getElementById("latitude").value = lat || '';
      document.getElementById("longitude").value = lng || '';
  
    
    }
  
    window.addEventListener("load", initAutocomplete);
  </script>
  
  
</body>
</html>


